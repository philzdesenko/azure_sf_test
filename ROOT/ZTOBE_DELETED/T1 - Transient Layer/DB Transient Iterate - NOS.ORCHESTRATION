{"job":{"components":{"17789":{"id":17789,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1859466705,"x":672,"y":-16,"width":32,"height":32,"inputConnectorIDs":[17832],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17849],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On Success Scale Down WH Transient NOS"}}}},"visible":true},"2":{"slot":2,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_default_warehouse}"}}}},"visible":true},"3":{"slot":3,"name":"Command Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Set"}}}},"visible":true},"4":{"slot":4,"name":"New name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"5":{"slot":5,"name":"Properties","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"WAREHOUSE_SIZE"},"2":{"slot":2,"type":"STRING","value":"XSMALL"}}}},"visible":true},"6":{"slot":6,"name":"Properties","elements":{},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17790":{"id":17790,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":256,"y":-128,"width":32,"height":32,"inputConnectorIDs":[17835],"outputSuccessConnectorIDs":[17841],"outputFailureConnectorIDs":[17863],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get File count from NOS Staging"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\ncur = context.cursor()\n#For test - /TEMPLATE_TEST/AG_TEST_64/2023-05-03/04-54-54/\nresult_arr = '''call ${var_environment_name}_${var_database_job_control}.${var_schema_job_control}.SP_CHECK_TO_SCALE_WH('${var_environment_name}','${var_schema_job_control}','${var_job_run_id}','${v_job_nos_stage_prefix}');\n'''\ncur.execute(result_arr)\nresult = cur.fetchall()\nif result is None:\n  print(\"File count not recieved\")\n  context.UpdateVariable('v_job_Message','Filecount not recieved from stored proc')\nelse:\n file_count = result[0][0]\n #file_count=cur.fetchone()[0]\n count = int(file_count)\n print('file_count returned from sproc :',count)\n if (count > ${var_wh_small_th_cnt}):\n  print('warehouse size is set to SMALL')\n  context.updateVariable('v_job_Warehouse_Size', 'SMALL')\n  print(v_job_Warehouse_Size)\n elif (count > ${var_wh_medium_th_cnt}):\n  print('warehouse size is set to MEDIUM')\n  context.updateVariable('v_job_Warehouse_Size', 'MEDIUM')\n  print(v_job_Warehouse_Size)\n elif (count > ${var_wh_large_th_cnt}):\n  print('warehouse size is set to LARGE')\n  context.updateVariable('v_job_Warehouse_Size', 'LARGE')\n  print(v_job_Warehouse_Size)\n else:\n  print ('warehouse resizing is not required')\n  print(v_job_Warehouse_Size)\n\n   \n\n\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17791":{"id":17791,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1859466705,"x":384,"y":-128,"width":32,"height":32,"inputConnectorIDs":[17841],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17853],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Scale Up WH Transient NOS"}}}},"visible":true},"2":{"slot":2,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_default_warehouse}"}}}},"visible":true},"3":{"slot":3,"name":"Command Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Set"}}}},"visible":true},"4":{"slot":4,"name":"New name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"5":{"slot":5,"name":"Properties","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"WAREHOUSE_SIZE"},"2":{"slot":2,"type":"STRING","value":"${v_job_Warehouse_Size}"}}}},"visible":true},"6":{"slot":6,"name":"Properties","elements":{},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17801":{"id":17801,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-741198691,"x":-288,"y":160,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Completed At","mapTo":"v_job_CompletedAt"},"2":{"slot":2,"fromId":null,"fromName":"Row Count","mapTo":"v_job_RowsInserted"},"3":{"slot":3,"fromId":null,"fromName":"Component","mapTo":"v_job_Component"},"4":{"slot":4,"fromId":null,"fromName":"Duration","mapTo":"v_job_Duration"},"5":{"slot":5,"fromId":null,"fromName":"Message","mapTo":"v_job_Message"},"6":{"slot":6,"fromId":null,"fromName":"Started At","mapTo":"v_job_StartedAt"},"7":{"slot":7,"fromId":null,"fromName":"Status","mapTo":"v_job_Status"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Transient_DB_Database_Query - Adhoc"}}}},"visible":true},"2":{"slot":2,"name":"Database Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${SourceDatabase}"}}}},"visible":true},"3":{"slot":3,"name":"Connection URL","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ConnectionString}"}}}},"visible":true},"6":{"slot":6,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${UserName}"}}}},"visible":true},"7":{"slot":7,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${SourcePassword}"}}}},"visible":true},"8":{"slot":8,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CALL DF.P_NOS_WRITE('${var_environment_name}','${SourceDatabaseName}','${SourceTableName}','${var_source_system_name}','${ProjectName}','${JobId}','${DeltaPrimaryColumn}', '${AdhocStart}','${AdhocEnd}');\n\n"}}}},"visible":true},"9":{"slot":9,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_environment_name}_${var_database_job_control}"}}}},"visible":true},"11":{"slot":11,"name":"Connection Options","elements":{},"visible":true},"12":{"slot":12,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"2"}}}},"visible":false},"13":{"slot":13,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_schema_job_control}"}}}},"visible":true},"14":{"slot":14,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_EXECUTION_NOS"}}}},"visible":true},"15":{"slot":15,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationWarehouse}"}}}},"visible":true},"16":{"slot":16,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"17":{"slot":17,"name":"Primary Keys","elements":{},"visible":true},"20":{"slot":20,"name":"Data Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"101":{"slot":101,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Advanced"}}}},"visible":true},"102":{"slot":102,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"103":{"slot":103,"name":"Data Selection","elements":{},"visible":false},"104":{"slot":104,"name":"Data Source Filter","elements":{},"visible":false},"105":{"slot":105,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":false},"106":{"slot":106,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":false},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1992":{"slot":1992,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_default_warehouse}"}}}},"visible":false},"1993":{"slot":1993,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"1994":{"slot":1994,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DEV_TEMPLATE_TEST"}}}},"visible":false},"1995":{"slot":1995,"name":"Stage Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationSchema}"}}}},"visible":false},"1996":{"slot":1996,"name":"Stage Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationDatabase}"}}}},"visible":false},"1997":{"slot":1997,"name":"New Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_EXECUTION_NOS"}}}},"visible":false},"1998":{"slot":1998,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_schema_job_control}"}}}},"visible":false},"1999":{"slot":1999,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_environment_name}_${var_database_job_control}"}}}},"visible":false},"2000":{"slot":2000,"name":"Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Standard"}}}},"visible":true},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":false},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":""}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"Gzip"}}}},"visible":true},"63319":{"slot":63319,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":true},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"datafactoryclassified"}}}},"visible":true},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_azure_container_temp}"}}}},"visible":true},"63322":{"slot":63322,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"84533":{"slot":84533,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Stage Platform","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Existing Azure Blob Storage Location"}}}},"visible":true},"88342":{"slot":88342,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":false},"88343":{"slot":88343,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88344":{"slot":88344,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"88345":{"slot":88345,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Custom]"}}}},"visible":true},"98776":{"slot":98776,"name":"GCS Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[17869]},"17802":{"id":17802,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-158614544,"x":-288,"y":128,"width":32,"height":16,"inputConnectorIDs":[17833],"outputSuccessConnectorIDs":[17837],"outputFailureConnectorIDs":[17858],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Retry Grab All"}}}},"visible":true},"2":{"slot":2,"name":"Number of Retries","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"3"}}}},"visible":true},"3":{"slot":3,"name":"Retry Delay","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Long delay with backoff"}}}},"visible":true},"4":{"slot":4,"name":"Retry Interval","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":false},"5":{"slot":5,"name":"Retry Time Unit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Second"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[17869],"inputIterationConnectorIDs":[]},"17803":{"id":17803,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":-464,"y":128,"width":32,"height":32,"inputConnectorIDs":[17842],"outputSuccessConnectorIDs":[17833],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Grab Adhoc Auditing - Before"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Transient Audit Logging Task"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_group"},"2":{"slot":2,"type":"STRING","value":"${var_component_group}"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_name"},"2":{"slot":2,"type":"STRING","value":"Transient_DB_Database_Query - Grab All"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_state"},"2":{"slot":2,"type":"STRING","value":"Before"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_schema"},"2":{"slot":2,"type":"STRING","value":"${DestinationSchema}"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_table"},"2":{"slot":2,"type":"STRING","value":"${DestinationTableName}"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_database"},"2":{"slot":2,"type":"STRING","value":"${DestinationDatabase}"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"var_job_run_id"},"2":{"slot":2,"type":"STRING","value":"${JobId}"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_functionality"},"2":{"slot":2,"type":"STRING","value":"transient"}}}},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17804":{"id":17804,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"CONDITIONAL","executionHint":"FLOW","implementationID":-1357378929,"x":-608,"y":128,"width":32,"height":32,"inputConnectorIDs":[17834],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[17842],"outputFalseConnectorIDs":[17846],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"If Adhoc Load Type"}}}},"visible":true},"2":{"slot":2,"name":"Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":true},"3":{"slot":3,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"LoadTypeName"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Equal to"},"4":{"slot":4,"type":"STRING","value":"ADHOC"}}}},"visible":true},"4":{"slot":4,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true},"5":{"slot":5,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17805":{"id":17805,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":-608,"y":-128,"width":32,"height":32,"inputConnectorIDs":[17845],"outputSuccessConnectorIDs":[17838],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Grab All with Primary Offset Auditing - Before"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Transient Audit Logging Task"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_group"},"2":{"slot":2,"type":"STRING","value":"${var_component_group}"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_name"},"2":{"slot":2,"type":"STRING","value":"Transient_DB_Database_Query - Grab All with Primary Offset"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_state"},"2":{"slot":2,"type":"STRING","value":"Before"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_schema"},"2":{"slot":2,"type":"STRING","value":"${DestinationSchema}"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_table"},"2":{"slot":2,"type":"STRING","value":"${DestinationTableName}"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_database"},"2":{"slot":2,"type":"STRING","value":"${DestinationDatabase}"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"var_job_run_id"},"2":{"slot":2,"type":"STRING","value":"${JobId}"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_functionality"},"2":{"slot":2,"type":"STRING","value":"transient"}}}},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17806":{"id":17806,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":432,"y":128,"width":32,"height":32,"inputConnectorIDs":[17850],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17851],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Auditing - After - On Failure"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"USE WAREHOUSE ${DestinationWarehouse};\n\nUPDATE ${var_environment_name}_${var_database_job_control}.${var_schema_audit}.JOB_EXECUTION A \n\tSET\n    QUERY_TYPE\t\t\t   =\t\t'EXTERNAL DB QUERY'\n    ,ROWS_INSERTED          = \t\tCASE WHEN ${v_job_RowsInserted} = -1 THEN 0 ELSE ${v_job_RowsInserted} END\n    ,ROWS_DELETED\t\t   =        0\n    ,ROWS_UPDATED\t\t   =        0\n    ,ROWS_AFTER\t\t\t   =        0\n    ,WAREHOUSE_NAME        =       \t'${DestinationWarehouse}'\n    ,END_TIME          = \t\tCURRENT_TIMESTAMP()::TIMESTAMP_NTZ\n    ,EXECUTION_STATUS      = \t\t'Failed'\n    ,ERROR_MESSAGE         = \t\t'${v_job_Message}'\n\t,MODIFIED_DATETIME = \t\t CURRENT_TIMESTAMP()::TIMESTAMP_NTZ\n\tWHERE \n    JOB_EXECUTION_ID       = \t\t'${JobId}'\n    AND A.DATABASE_NAME    = \t\t'${DestinationDatabase}'\n    AND A.SCHEMA_NAME \t   = \t\t'${DestinationSchema}'\n\tAND A.TABLE_NAME       = \t\t'${DestinationTableName}'\n\tAND A.EXECUTION_STATUS = \t\t'Running'\n    AND A.CONTEXT_NAME \t   = \t\t'${var_component_group}'\n    --AND A.JOB_COMPONENT    =\t\t'${v_job_Component}'\n    ;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17807":{"id":17807,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-158614544,"x":-304,"y":-128,"width":32,"height":16,"inputConnectorIDs":[17838],"outputSuccessConnectorIDs":[17839],"outputFailureConnectorIDs":[17864],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Retry Primary Offset"}}}},"visible":true},"2":{"slot":2,"name":"Number of Retries","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"3"}}}},"visible":true},"3":{"slot":3,"name":"Retry Delay","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Long delay with backoff"}}}},"visible":true},"4":{"slot":4,"name":"Retry Interval","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":false},"5":{"slot":5,"name":"Retry Time Unit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Second"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[17867],"inputIterationConnectorIDs":[]},"17808":{"id":17808,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-32,"y":-240,"width":32,"height":32,"inputConnectorIDs":[17847],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Component","mapTo":"v_job_Component"},"2":{"slot":2,"fromId":null,"fromName":"Duration","mapTo":"v_job_Duration"},"3":{"slot":3,"fromId":null,"fromName":"Message","mapTo":"v_job_Message"},"4":{"slot":4,"fromId":null,"fromName":"Status","mapTo":"v_job_Status"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Auditing - After - On Success"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"USE WAREHOUSE ${DestinationWarehouse};\n\nINSERT INTO  ${var_environment_name}_${var_database_job_control}.${var_schema_audit}.JOB_EXECUTION \n(JOB_EXECUTION_ID,DATABASE_NAME, SCHEMA_NAME, TABLE_NAME, USER_NAME, ROLE_NAME, START_TIME, \n  \t\tROWS_BEFORE,WAREHOUSE_NAME,CREATE_DATETIME,  CONTEXT_NAME,QUERY_TYPE,EXECUTION_STATUS,\n ROWS_INSERTED,ROWS_UPDATED,ROWS_DELETED,ROWS_AFTER,MODIFIED_DATETIME, END_TIME)\nSELECT\n\t\tA.JOB_EXECUTION_ID,\n  \t\tA.DATABASE_NAME, \n  \t\tA.SCHEMA_NAME, \n  \t\tA.TABLE_NAME, \n  \t\tA.USER_NAME, \n  \t\tA.ROLE_NAME, \n  \t\tA.START_TIME, \n  \t\tA.ROWS_BEFORE, \n  \t\tA.WAREHOUSE_NAME, \n  \t\tA.CREATE_DATETIME, \n  \t\tA.CONTEXT_NAME, \n        'EXTERNAL DB QUERY'\n    \t, 'Succeeded' \n   \t  , 0\n    ,  0 \n    , 0\n    , 0 \n    , CURRENT_TIMESTAMP()::TIMESTAMP_NTZ    \n    , CURRENT_TIMESTAMP()::TIMESTAMP_NTZ \nFROM \n(\n  SELECT * FROM\n${var_environment_name}_${var_database_job_control}.${var_schema_audit}.JOB_EXECUTION_TEMP\n  WHERE JOB_EXECUTION_ID = ${var_job_run_id}\n\tAND TABLE_NAME = '${DestinationTableName}'\n   AND DATABASE_NAME = '${DestinationDatabase}'\n    AND SCHEMA_NAME = '${DestinationSchema}'\n\tAND EXECUTION_STATUS = 'Running'\n    ORDER BY START_TIME DESC\n    LIMIT 1\n  ) A\n;"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17809":{"id":17809,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":320,"y":128,"width":32,"height":32,"inputConnectorIDs":[17848],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17850],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Clean Variable string"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\n\ncontext.updateVariable('v_job_Message',\"\"\"${v_job_Message}\"\"\".replace(\"'\",\"\"))\ncontext.updateVariable('v_job_Status',\"${v_job_Status}\".replace(\"'\",\"\"))\n\n\n\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17810":{"id":17810,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-741198691,"x":-304,"y":48,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Completed At","mapTo":"v_job_CompletedAt"},"2":{"slot":2,"fromId":null,"fromName":"Row Count","mapTo":"v_job_RowsInserted"},"3":{"slot":3,"fromId":null,"fromName":"Component","mapTo":"v_job_Component"},"4":{"slot":4,"fromId":null,"fromName":"Duration","mapTo":"v_job_Duration"},"5":{"slot":5,"fromId":null,"fromName":"Message","mapTo":"v_job_Message"},"6":{"slot":6,"fromId":null,"fromName":"Started At","mapTo":"v_job_StartedAt"},"7":{"slot":7,"fromId":null,"fromName":"Status","mapTo":"v_job_Status"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Transient_DB_Database_Query - All"}}}},"visible":true},"2":{"slot":2,"name":"Database Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${SourceDatabase}"}}}},"visible":true},"3":{"slot":3,"name":"Connection URL","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ConnectionString}"}}}},"visible":true},"6":{"slot":6,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${UserName}"}}}},"visible":true},"7":{"slot":7,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${SourcePassword}"}}}},"visible":true},"8":{"slot":8,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CALL DF.P_NOS_WRITE('${var_environment_name}','${SourceDatabaseName}','${SourceTableName}','${var_source_system_name}','${ProjectName}','${JobId}',NULL, NULL,NULL);\n\n"}}}},"visible":true},"9":{"slot":9,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_environment_name}_${var_database_job_control}"}}}},"visible":true},"11":{"slot":11,"name":"Connection Options","elements":{},"visible":true},"12":{"slot":12,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"2"}}}},"visible":false},"13":{"slot":13,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_schema_job_control}"}}}},"visible":true},"14":{"slot":14,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_EXECUTION_NOS"}}}},"visible":true},"15":{"slot":15,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationWarehouse}"}}}},"visible":true},"16":{"slot":16,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"17":{"slot":17,"name":"Primary Keys","elements":{},"visible":true},"20":{"slot":20,"name":"Data Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"101":{"slot":101,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Advanced"}}}},"visible":true},"102":{"slot":102,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"103":{"slot":103,"name":"Data Selection","elements":{},"visible":false},"104":{"slot":104,"name":"Data Source Filter","elements":{},"visible":false},"105":{"slot":105,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":false},"106":{"slot":106,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":false},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1992":{"slot":1992,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_default_warehouse}"}}}},"visible":false},"1993":{"slot":1993,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"1994":{"slot":1994,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DEV_TEMPLATE_TEST"}}}},"visible":false},"1995":{"slot":1995,"name":"Stage Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationSchema}"}}}},"visible":false},"1996":{"slot":1996,"name":"Stage Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationDatabase}"}}}},"visible":false},"1997":{"slot":1997,"name":"New Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_EXECUTION_NOS"}}}},"visible":false},"1998":{"slot":1998,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_schema_job_control}"}}}},"visible":false},"1999":{"slot":1999,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_environment_name}_${var_database_job_control}"}}}},"visible":false},"2000":{"slot":2000,"name":"Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Standard"}}}},"visible":true},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":false},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":""}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"Gzip"}}}},"visible":true},"63319":{"slot":63319,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":true},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"datafactoryclassified"}}}},"visible":true},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_azure_container_temp}"}}}},"visible":true},"63322":{"slot":63322,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"84533":{"slot":84533,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Stage Platform","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Existing Azure Blob Storage Location"}}}},"visible":true},"88342":{"slot":88342,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":false},"88343":{"slot":88343,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88344":{"slot":88344,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"88345":{"slot":88345,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Custom]"}}}},"visible":true},"98776":{"slot":98776,"name":"GCS Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[17865]},"17811":{"id":17811,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-741198691,"x":-304,"y":-96,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Completed At","mapTo":"v_job_CompletedAt"},"2":{"slot":2,"fromId":null,"fromName":"Row Count","mapTo":"v_job_RowsInserted"},"3":{"slot":3,"fromId":null,"fromName":"Component","mapTo":"v_job_Component"},"4":{"slot":4,"fromId":null,"fromName":"Duration","mapTo":"v_job_Duration"},"5":{"slot":5,"fromId":null,"fromName":"Message","mapTo":"v_job_Message"},"6":{"slot":6,"fromId":null,"fromName":"Started At","mapTo":"v_job_StartedAt"},"7":{"slot":7,"fromId":null,"fromName":"Status","mapTo":"v_job_Status"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Transient_DB_Database_Query - All with Primary Offset"}}}},"visible":true},"2":{"slot":2,"name":"Database Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${SourceDatabase}"}}}},"visible":true},"3":{"slot":3,"name":"Connection URL","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ConnectionString}"}}}},"visible":true},"6":{"slot":6,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${UserName}"}}}},"visible":true},"7":{"slot":7,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${SourcePassword}"}}}},"visible":true},"8":{"slot":8,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CALL DF.P_NOS_WRITE('${var_environment_name}','${SourceDatabaseName}','${SourceTableName}','${var_source_system_name}','${ProjectName}','${JobId}','${DeltaPrimaryColumn}', '${NextDeltaValue}',NULL);\n\n"}}}},"visible":true},"9":{"slot":9,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_environment_name}_${var_database_job_control}"}}}},"visible":true},"11":{"slot":11,"name":"Connection Options","elements":{},"visible":true},"12":{"slot":12,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"2"}}}},"visible":false},"13":{"slot":13,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_schema_job_control}"}}}},"visible":true},"14":{"slot":14,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_EXECUTION_NOS"}}}},"visible":true},"15":{"slot":15,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationWarehouse}"}}}},"visible":true},"16":{"slot":16,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"17":{"slot":17,"name":"Primary Keys","elements":{},"visible":true},"20":{"slot":20,"name":"Data Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"101":{"slot":101,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Advanced"}}}},"visible":true},"102":{"slot":102,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"103":{"slot":103,"name":"Data Selection","elements":{},"visible":false},"104":{"slot":104,"name":"Data Source Filter","elements":{},"visible":false},"105":{"slot":105,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":false},"106":{"slot":106,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":false},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1992":{"slot":1992,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false},"1993":{"slot":1993,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"1994":{"slot":1994,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"1995":{"slot":1995,"name":"Stage Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false},"1996":{"slot":1996,"name":"Stage Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false},"1997":{"slot":1997,"name":"New Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"pang_primelatency"}}}},"visible":false},"1998":{"slot":1998,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"TEMPLATE_TEST"}}}},"visible":false},"1999":{"slot":1999,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DEV_T1_TRANSIENT_STAGING"}}}},"visible":false},"2000":{"slot":2000,"name":"Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Standard"}}}},"visible":true},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":false},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":""}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"Gzip"}}}},"visible":true},"63319":{"slot":63319,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":true},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"datafactoryclassified"}}}},"visible":true},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_azure_container_temp}"}}}},"visible":true},"63322":{"slot":63322,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"84533":{"slot":84533,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Stage Platform","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Existing Azure Blob Storage Location"}}}},"visible":true},"88342":{"slot":88342,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":false},"88343":{"slot":88343,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88344":{"slot":88344,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"88345":{"slot":88345,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Custom]"}}}},"visible":true},"98776":{"slot":98776,"name":"GCS Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[17867]},"17812":{"id":17812,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1859466705,"x":176,"y":128,"width":32,"height":32,"inputConnectorIDs":[17855],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17848],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On Failure Scale Down WH Transient NOS"}}}},"visible":true},"2":{"slot":2,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_default_warehouse}"}}}},"visible":true},"3":{"slot":3,"name":"Command Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Set"}}}},"visible":true},"4":{"slot":4,"name":"New name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"5":{"slot":5,"name":"Properties","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"WAREHOUSE_SIZE"},"2":{"slot":2,"type":"STRING","value":"XSMALL"}}}},"visible":true},"6":{"slot":6,"name":"Properties","elements":{},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17813":{"id":17813,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":800,"y":-16,"width":32,"height":32,"inputConnectorIDs":[17849],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Auditing - After - On Success with records"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Transient Audit Logging Task"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_group"},"2":{"slot":2,"type":"STRING","value":"${var_component_group}"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_name"},"2":{"slot":2,"type":"STRING","value":"${v_job_Component}"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_state"},"2":{"slot":2,"type":"STRING","value":"${v_job_Status}"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_schema"},"2":{"slot":2,"type":"STRING","value":"${DestinationSchema}"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_table"},"2":{"slot":2,"type":"STRING","value":"${DestinationTableName}"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_database"},"2":{"slot":2,"type":"STRING","value":"${DestinationDatabase}"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"var_job_run_id"},"2":{"slot":2,"type":"STRING","value":"${JobId}"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_query_tag"},"2":{"slot":2,"type":"STRING","value":"${var_component_query_tag}"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_table_rows_inserted"},"2":{"slot":2,"type":"STRING","value":"${v_job_RowsInserted}"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_functionality"},"2":{"slot":2,"type":"STRING","value":"transient"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_query_start_time"},"2":{"slot":2,"type":"STRING","value":"${v_job_StartedAt}"}}}},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17814":{"id":17814,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"CONDITIONAL","executionHint":"FLOW","implementationID":-1357378929,"x":-608,"y":16,"width":32,"height":32,"inputConnectorIDs":[17846],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[17843],"outputFalseConnectorIDs":[17845],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"NextDeltaValue is Blank"}}}},"visible":true},"2":{"slot":2,"name":"Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":true},"3":{"slot":3,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"NextDeltaValue"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Blank"},"4":{"slot":4,"type":"STRING","value":""}}}},"visible":true},"4":{"slot":4,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true},"5":{"slot":5,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17815":{"id":17815,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-752,"y":16,"width":32,"height":32,"inputConnectorIDs":[17854],"outputSuccessConnectorIDs":[17834],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Truncate Table before Load"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"USE WAREHOUSE ${DestinationWarehouse};\n\ntruncate table if exists \"${DestinationDatabase}\".\"${DestinationSchema}\".\"${DestinationTableName}\";\n\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17816":{"id":17816,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-158614544,"x":-304,"y":16,"width":32,"height":16,"inputConnectorIDs":[17840],"outputSuccessConnectorIDs":[17836],"outputFailureConnectorIDs":[17859],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Retry Grab All"}}}},"visible":true},"2":{"slot":2,"name":"Number of Retries","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"3"}}}},"visible":true},"3":{"slot":3,"name":"Retry Delay","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Long delay with backoff"}}}},"visible":true},"4":{"slot":4,"name":"Retry Interval","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":false},"5":{"slot":5,"name":"Retry Time Unit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Second"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[17865],"inputIterationConnectorIDs":[]},"17817":{"id":17817,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":688,"y":128,"width":32,"height":32,"inputConnectorIDs":[17852],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17818":{"id":17818,"inputCardinality":"MANY","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":-1343684451,"x":-144,"y":-128,"width":32,"height":32,"inputConnectorIDs":[17836,17837,17839],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17856],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Or success"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17819":{"id":17819,"inputCardinality":"MANY","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":-1343684451,"x":16,"y":128,"width":32,"height":32,"inputConnectorIDs":[17858,17859,17860,17861,17862,17863,17864],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17855],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Or Failure"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17820":{"id":17820,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":560,"y":128,"width":32,"height":32,"inputConnectorIDs":[17851],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17852],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update TRANSIENT_FAILURE and  LAST_FAILURE_DATE"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"USE WAREHOUSE ${DestinationWarehouse};\n\nUPDATE ${var_environment_name}_${var_database_job_control}.${var_schema_job_control}.\"STAGING_CONTROL_DB\"\nSET TRANSIENT_FAILURE_FLAG = 1\n, LAST_FAILURE_DATE = CAST(CURRENT_TIMESTAMP() AS TIMESTAMP_NTZ(9))\nWHERE Source_TABLE_NAME = '${SourceTableName}'\nAND Source_DATABASE_NAME = '${SourceDatabaseName}'\nAND Source_SYSTEM_NAME= '${SourceSystem}'\nAND\n(('${LoadTypeName}' = 'INTERFACE' AND  INTERFACE_NAME = '${LoadTypeValue}' )\nOR\n('${LoadTypeName}' = 'ADHOC'  AND ADHOC_LOAD_FLAG = 1 )\n );"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17821":{"id":17821,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":112,"y":-128,"width":32,"height":32,"inputConnectorIDs":[17844],"outputSuccessConnectorIDs":[17835],"outputFailureConnectorIDs":[17860],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get the Stage Path Prefix"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\ncur = context.cursor()\n\nfetch_blob_location = '''\nselect BLOB_LOCATION from \n\"${var_environment_name}_${var_database_job_control}\".\"${var_schema_job_control}\".JOB_EXECUTION_NOS WHERE \nJOB_EXECUTION_ID = ${JobId}  AND DATABASE_NAME = '${SourceDatabaseName}'  AND TABLE_NAME = '${SourceTableName}'\norder by END_TIME desc ; \n'''\n\nprint(\"jobs inserted\", v_job_RowsInserted) \n\ncur.execute(fetch_blob_location)\nresult_set = cur.fetchone()\n\nprint(fetch_blob_location)\nprint(result_set)\n\n### Needs fixing in future sprint for error handling - empty NOS exports.  \nif result_set:\n  blob = str(result_set[0])\n  stage_prefix = \"/\" + \"/\".join(str.split(blob,\"/\")[6:11])\n  sor_file_path = \"/\".join(str.split(blob,\"/\")[4:11])\n  context.updateVariable('v_job_nos_stage_prefix',stage_prefix)\n  print('Variable v_job_nos_stage_prefix has been updated to {0}'.format(stage_prefix))\n  context.updateVariable('v_job_sor_file_path',sor_file_path)\n  print('Variable v_job_sor_file_path has been updated to {0}'.format(sor_file_path))\nelse:\n  raise\n\n   \n\n\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17822":{"id":17822,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":544,"y":16,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Completed At","mapTo":"v_job_CompletedAt"},"2":{"slot":2,"fromId":null,"fromName":"Row Count","mapTo":"v_job_RowsInserted"},"3":{"slot":3,"fromId":null,"fromName":"Component","mapTo":"v_job_Component"},"4":{"slot":4,"fromId":null,"fromName":"Duration","mapTo":"v_job_Duration"},"5":{"slot":5,"fromId":null,"fromName":"Message","mapTo":"v_job_Message"},"6":{"slot":6,"fromId":null,"fromName":"Started At","mapTo":"v_job_StartedAt"},"7":{"slot":7,"fromId":null,"fromName":"Status","mapTo":"v_job_Status"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Insert from Variant to Transient"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"USE WAREHOUSE ${DestinationWarehouse};\n\n\nSET TIMESTAMP_LOAD_VALUE = ( select max(folderpath_datetime)  from \"${var_environment_name}_${var_database_persistent}\".\"${DestinationSchema}\".\"${DestinationTableName}\");\n\ninsert into ${DestinationDatabase}.${DestinationSchema}.${DestinationTableName}\nselect\n*\nfrom\n${DatalakeDatabase}.${DatalakeSchema}.\"VW_SOR_GET_${DestinationTableName}\"\nwhere try_to_timestamp(\"FOLDERPATH_DATETIME\",'YYYY-MM-DD_HH24-MI-SS')\n\t\t\t  > try_to_timestamp(\n\t\t\t\t\t\t\t\t\t   coalesce(\n\t\t\t\t\t\t\t\t\t\t\t\t\t$TIMESTAMP_LOAD_VALUE\n\t\t\t\t\t\t\t\t\t\t\t\t\t,'1900-01-01_00-00-00'\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t ,'YYYY-MM-DD_HH24-MI-SS'\n\t\t\t\t\t\t\t\t\t);\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[17866]},"17823":{"id":17823,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-158614544,"x":544,"y":-16,"width":32,"height":16,"inputConnectorIDs":[17831],"outputSuccessConnectorIDs":[17832],"outputFailureConnectorIDs":[17861],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Retry Persistent Insert"}}}},"visible":true},"2":{"slot":2,"name":"Number of Retries","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"1"}}}},"visible":true},"3":{"slot":3,"name":"Retry Delay","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Short delay with backoff"}}}},"visible":true},"4":{"slot":4,"name":"Retry Interval","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":false},"5":{"slot":5,"name":"Retry Time Unit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Second"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[17866],"inputIterationConnectorIDs":[]},"17824":{"id":17824,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":544,"y":-96,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Completed At","mapTo":"v_job_CompletedAt"},"2":{"slot":2,"fromId":null,"fromName":"Component","mapTo":"v_job_Component"},"3":{"slot":3,"fromId":null,"fromName":"Duration","mapTo":"v_job_Duration"},"4":{"slot":4,"fromId":null,"fromName":"Message","mapTo":"v_job_Message"},"5":{"slot":5,"fromId":null,"fromName":"Started At","mapTo":"v_job_StartedAt"},"6":{"slot":6,"fromId":null,"fromName":"Status","mapTo":"v_job_Status"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy into Variant"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"USE WAREHOUSE ${DestinationWarehouse};\n\n\n\nCOPY INTO ${DatalakeDatabase}.${DatalakeSchema}.${DatalakeTableName}\n(\n-- unique query identifier ${var_component_query_tag}\n        \n        FOLDERPATH\n  \t  , FILENAME\n      , FOLDERPATH_DATETIME\n      , LOAD_JOB_ID\n      , LOAD_DATETIME\n      , CONTENTS\n    )\n    FROM (\n      SELECT\n          regexp_replace(METADATA$FILENAME::STRING ,'(.*\\/)(.*)','\\\\1')              -- FOLDERPATH\n        , SPLIT_PART(METADATA$FILENAME::STRING, '/',-1) -- FILENAME\n        , SPLIT_PART(METADATA$FILENAME, '/',5)||'_' || SPLIT_PART(METADATA$FILENAME, '/',6)   -- FOLDERPATH_DATETIME\n        , ${JobId}\n        , CURRENT_TIMESTAMP                       -- LOAD_DATETIME\n        , $1::VARIANT                             -- CONTENTS\n      FROM @${DatalakeDatabase}.${DatalakeSchema}.${ExternalStageArea}${v_job_nos_stage_prefix}\n       (file_format => ${DatalakeDatabase}.${DatalakeSchema}.${ExternalStageFileFormat})\n    ); "}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[17868]},"17825":{"id":17825,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-158614544,"x":544,"y":-128,"width":32,"height":16,"inputConnectorIDs":[17853],"outputSuccessConnectorIDs":[17831],"outputFailureConnectorIDs":[17862],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Retry DB Query (1)"}}}},"visible":true},"2":{"slot":2,"name":"Number of Retries","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"1"}}}},"visible":true},"3":{"slot":3,"name":"Retry Delay","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Short delay with backoff"}}}},"visible":true},"4":{"slot":4,"name":"Retry Interval","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":false},"5":{"slot":5,"name":"Retry Time Unit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Second"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[17868],"inputIterationConnectorIDs":[]},"17826":{"id":17826,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":-464,"y":16,"width":32,"height":32,"inputConnectorIDs":[17843],"outputSuccessConnectorIDs":[17840],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Grab All Auditing - Before"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Transient Audit Logging Task"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_group"},"2":{"slot":2,"type":"STRING","value":"${var_component_group}"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_name"},"2":{"slot":2,"type":"STRING","value":"Transient_DB_Database_Query - Grab All"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_state"},"2":{"slot":2,"type":"STRING","value":"Before"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_schema"},"2":{"slot":2,"type":"STRING","value":"${DestinationSchema}"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_table"},"2":{"slot":2,"type":"STRING","value":"${DestinationTableName}"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"var_destination_database"},"2":{"slot":2,"type":"STRING","value":"${DestinationDatabase}"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"var_job_run_id"},"2":{"slot":2,"type":"STRING","value":"${JobId}"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"var_audit_component_functionality"},"2":{"slot":2,"type":"STRING","value":"transient"}}}},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17827":{"id":17827,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-880,"y":16,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17854],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17828":{"id":17828,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":112,"y":-320,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[17857],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17829":{"id":17829,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-741198691,"x":288,"y":-320,"width":32,"height":32,"inputConnectorIDs":[17857],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Completed At","mapTo":"v_job_CompletedAt"},"2":{"slot":2,"fromId":null,"fromName":"Row Count","mapTo":"v_job_RowsInserted"},"3":{"slot":3,"fromId":null,"fromName":"Component","mapTo":"v_job_Component"},"4":{"slot":4,"fromId":null,"fromName":"Duration","mapTo":"v_job_Duration"},"5":{"slot":5,"fromId":null,"fromName":"Message","mapTo":"v_job_Message"},"6":{"slot":6,"fromId":null,"fromName":"Started At","mapTo":"v_job_StartedAt"},"7":{"slot":7,"fromId":null,"fromName":"Status","mapTo":"v_job_Status"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Transient_DB_Database_Query - All"}}}},"visible":true},"2":{"slot":2,"name":"Database Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Teradata"}}}},"visible":true},"3":{"slot":3,"name":"Connection URL","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"jdbc:teradata://dhl41cop1.prg-dc.dhl.com/TMODE=TERA,CHARSET=UTF8,ENCRYPTDATA=ON,LOGMECH=LDAP"}}}},"visible":true},"6":{"slot":6,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"anupamag"}}}},"visible":true},"7":{"slot":7,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"TEST"}}}},"visible":true},"8":{"slot":8,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"select * from dbt_c360_p.AG_TEST_20;\n"}}}},"visible":true},"9":{"slot":9,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_environment_name}_${var_database_job_control}"}}}},"visible":true},"11":{"slot":11,"name":"Connection Options","elements":{},"visible":true},"12":{"slot":12,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"2"}}}},"visible":false},"13":{"slot":13,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_schema_job_control}"}}}},"visible":true},"14":{"slot":14,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_EXECUTION_NOS"}}}},"visible":true},"15":{"slot":15,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationWarehouse}"}}}},"visible":true},"16":{"slot":16,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"17":{"slot":17,"name":"Primary Keys","elements":{},"visible":true},"20":{"slot":20,"name":"Data Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"101":{"slot":101,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Advanced"}}}},"visible":true},"102":{"slot":102,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"103":{"slot":103,"name":"Data Selection","elements":{},"visible":false},"104":{"slot":104,"name":"Data Source Filter","elements":{},"visible":false},"105":{"slot":105,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":false},"106":{"slot":106,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":false},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1992":{"slot":1992,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_default_warehouse}"}}}},"visible":false},"1993":{"slot":1993,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"1994":{"slot":1994,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DEV_TEMPLATE_TEST"}}}},"visible":false},"1995":{"slot":1995,"name":"Stage Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationSchema}"}}}},"visible":false},"1996":{"slot":1996,"name":"Stage Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${DestinationDatabase}"}}}},"visible":false},"1997":{"slot":1997,"name":"New Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_EXECUTION_NOS"}}}},"visible":false},"1998":{"slot":1998,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_schema_job_control}"}}}},"visible":false},"1999":{"slot":1999,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_environment_name}_${var_database_job_control}"}}}},"visible":false},"2000":{"slot":2000,"name":"Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Standard"}}}},"visible":true},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":false},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":""}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"Gzip"}}}},"visible":true},"63319":{"slot":63319,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":true},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"datafactoryclassified"}}}},"visible":true},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${var_azure_container_temp}"}}}},"visible":true},"63322":{"slot":63322,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"84533":{"slot":84533,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Stage Platform","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Existing Azure Blob Storage Location"}}}},"visible":true},"88342":{"slot":88342,"name":"Stage Authentication","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Credentials"}}}},"visible":false},"88343":{"slot":88343,"name":"Storage Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88344":{"slot":88344,"name":"Use Accelerated Endpoint","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"False"}}}},"visible":false},"88345":{"slot":88345,"name":"Stage","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Custom]"}}}},"visible":true},"98776":{"slot":98776,"name":"GCS Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"17830":{"id":17830,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"CONDITIONAL","executionHint":"FLOW","implementationID":-1357378929,"x":-32,"y":-128,"width":32,"height":32,"inputConnectorIDs":[17856],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[17844],"outputFalseConnectorIDs":[17847],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Check rows staged"}}}},"visible":true},"2":{"slot":2,"name":"Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":true},"3":{"slot":3,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"v_job_RowsInserted"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Greater than"},"4":{"slot":4,"type":"STRING","value":"0"}}}},"visible":true},"4":{"slot":4,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true},"5":{"slot":5,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"17831":{"id":17831,"sourceID":17825,"targetID":17823},"17832":{"id":17832,"sourceID":17823,"targetID":17789},"17833":{"id":17833,"sourceID":17803,"targetID":17802},"17834":{"id":17834,"sourceID":17815,"targetID":17804},"17835":{"id":17835,"sourceID":17821,"targetID":17790},"17836":{"id":17836,"sourceID":17816,"targetID":17818},"17837":{"id":17837,"sourceID":17802,"targetID":17818},"17838":{"id":17838,"sourceID":17805,"targetID":17807},"17839":{"id":17839,"sourceID":17807,"targetID":17818},"17840":{"id":17840,"sourceID":17826,"targetID":17816},"17841":{"id":17841,"sourceID":17790,"targetID":17791}},"failureConnectors":{"17858":{"id":17858,"sourceID":17802,"targetID":17819},"17859":{"id":17859,"sourceID":17816,"targetID":17819},"17860":{"id":17860,"sourceID":17821,"targetID":17819},"17861":{"id":17861,"sourceID":17823,"targetID":17819},"17862":{"id":17862,"sourceID":17825,"targetID":17819},"17863":{"id":17863,"sourceID":17790,"targetID":17819},"17864":{"id":17864,"sourceID":17807,"targetID":17819}},"unconditionalConnectors":{"17848":{"id":17848,"sourceID":17812,"targetID":17809},"17849":{"id":17849,"sourceID":17789,"targetID":17813},"17850":{"id":17850,"sourceID":17809,"targetID":17806},"17851":{"id":17851,"sourceID":17806,"targetID":17820},"17852":{"id":17852,"sourceID":17820,"targetID":17817},"17853":{"id":17853,"sourceID":17791,"targetID":17825},"17854":{"id":17854,"sourceID":17827,"targetID":17815},"17855":{"id":17855,"sourceID":17819,"targetID":17812},"17856":{"id":17856,"sourceID":17818,"targetID":17830},"17857":{"id":17857,"sourceID":17828,"targetID":17829}},"trueConnectors":{"17842":{"id":17842,"sourceID":17804,"targetID":17803},"17843":{"id":17843,"sourceID":17814,"targetID":17826},"17844":{"id":17844,"sourceID":17830,"targetID":17821}},"falseConnectors":{"17845":{"id":17845,"sourceID":17814,"targetID":17805},"17846":{"id":17846,"sourceID":17804,"targetID":17814},"17847":{"id":17847,"sourceID":17830,"targetID":17808}},"iterationConnectors":{"17865":{"id":17865,"sourceID":17816,"targetID":17810},"17866":{"id":17866,"sourceID":17823,"targetID":17822},"17867":{"id":17867,"sourceID":17807,"targetID":17811},"17868":{"id":17868,"sourceID":17825,"targetID":17824},"17869":{"id":17869,"sourceID":17802,"targetID":17801}},"noteConnectors":{},"notes":{"17788":{"id":17788,"x":-802,"y":-364,"width":724,"height":101,"text":"**PROCESS DETAILS**\n\n1. A DB Query component will execute \"Copy into stage\" only on successful connection to the external DB and if there are new records/updated records available at the source for ingestion. Hence the log is a general log for failures and for no new records.\n\n2. The date conversion function can be different for each DB type in the database query.","colour":"00ce4f"}},"variables":{"AdhocEnd":{"definition":{"name":"AdhocEnd","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"AdhocStart":{"definition":{"name":"AdhocStart","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"ConnectionString":{"definition":{"name":"ConnectionString","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"jdbc:teradata://dhl41cop1.prg-dc.dhl.com/LOGMECH=LDAP,TMODE=TERA,CHARSET=UTF8,ENCRYPTDATA=ON"},"DatalakeDatabase":{"definition":{"name":"DatalakeDatabase","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"DatalakeSchema":{"definition":{"name":"DatalakeSchema","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"DatalakeTableName":{"definition":{"name":"DatalakeTableName","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"DeltaKey":{"definition":{"name":"DeltaKey","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"DUMMY"},"DeltaPrimaryColumn":{"definition":{"name":"DeltaPrimaryColumn","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"\"LastModifiedDate\""},"DeltaSecondaryColumn":{"definition":{"name":"DeltaSecondaryColumn","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"DUMMY"},"DeltaSqlStatement":{"definition":{"name":"DeltaSqlStatement","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"1=1"},"DestinationDatabase":{"definition":{"name":"DestinationDatabase","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"DEV_T1_TRANSIENT_STAGING"},"DestinationSchema":{"definition":{"name":"DestinationSchema","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"TEMPLATE_TEST"},"DestinationTableName":{"definition":{"name":"DestinationTableName","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"DestinationWarehouse":{"definition":{"name":"DestinationWarehouse","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"WORK_DEV_XS"},"ExternalStageArea":{"definition":{"name":"ExternalStageArea","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"DEV_TEMPLATE_TEST"},"ExternalStageFileFormat":{"definition":{"name":"ExternalStageFileFormat","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"PARQUET_NOS_TEMPLATE_TEST"},"ExternalStagePrefix":{"definition":{"name":"ExternalStagePrefix","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"AG_TEST_64"},"JobId":{"definition":{"name":"JobId","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"1001733"},"LoadTypeName":{"definition":{"name":"LoadTypeName","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"LoadTypeValue":{"definition":{"name":"LoadTypeValue","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"NextDeltaValue":{"definition":{"name":"NextDeltaValue","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"2019-06-23 23:02:41.000"},"ProjectName":{"definition":{"name":"ProjectName","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"SourceDatabase":{"definition":{"name":"SourceDatabase","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"Teradata"},"SourceDatabaseName":{"definition":{"name":"SourceDatabaseName","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"DBT_C360_P"},"SourcePassword":{"definition":{"name":"SourcePassword","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"AG_DBT_C360_P3"},"SourceSchema":{"definition":{"name":"SourceSchema","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":""},"SourceSystem":{"definition":{"name":"SourceSystem","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"DUMMY"},"SourceTableName":{"definition":{"name":"SourceTableName","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"AG_TEST_66"},"UserName":{"definition":{"name":"UserName","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"anupamag"},"v_job_CompletedAt":{"definition":{"name":"v_job_CompletedAt","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"v_job_Component":{"definition":{"name":"v_job_Component","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"v_job_Duration":{"definition":{"name":"v_job_Duration","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"v_job_Filename":{"definition":{"name":"v_job_Filename","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"v_job_Message":{"definition":{"name":"v_job_Message","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"v_job_RowsInserted":{"definition":{"name":"v_job_RowsInserted","type":"DECIMAL","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"0"},"v_job_StartedAt":{"definition":{"name":"v_job_StartedAt","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"v_job_Status":{"definition":{"name":"v_job_Status","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"v_job_Warehouse_Size":{"definition":{"name":"v_job_Warehouse_Size","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"XSMALL"},"v_job_nos_stage_prefix":{"definition":{"name":"v_job_nos_stage_prefix","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"v_job_sor_file_path":{"definition":{"name":"v_job_sor_file_path","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"var_component_group":{"definition":{"name":"var_component_group","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"DB_Transient_Iterate_NOS"},"var_component_name":{"definition":{"name":"var_component_name","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"Transient DB Database Query NOS"},"var_component_query_tag":{"definition":{"name":"var_component_query_tag","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"NOS"}},"grids":{}},"info":{"name":"DB Transient Iterate - NOS","description":"","type":"ORCHESTRATION","tag":"f773c607-fc7f-4906-abbe-2875abdafb39"}}